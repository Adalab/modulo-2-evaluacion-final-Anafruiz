"use strict";const buttonElement=document.querySelector(".js-button"),inputElement=document.querySelector(".js-input"),nameElement=document.querySelector(".js-shows"),formElement=document.querySelector(".js-form");let showsList=[],favouriteList=[];function getFromApi(){const t=inputElement.value;fetch("//api.tvmaze.com/search/shows?q="+t).then(t=>t.json()).then(t=>{paintElements(t),listenShowsEvents(),setInLocalStorage()})}function handleForm(t){t.preventDefault()}formElement.addEventListener("submit",handleForm);let imagenDefault="https://via.placeholder.com/210x295/ffffff/666666/?";function paintElements(t){let e="";e+="<ul>",showsList=[];for(const o of t){const t=o.show.name,s=o.show.image,n=o.show.id,i=o.show;let a;showsList.push({name:t,img:s,id:n}),a=isShowsFavourites(i)?"backstyle":"",e+=`<li class="show " data-myid=${n} >`,e+=`<h2 class="title2">Nombre:${t}</h2>`,e+=null===s?`<img class="imgList  ${a}" src="${imagenDefault}"> `:`<img class="imgList  ${a}" src="${s.medium}"> `,e+="</li>"}e+="</ul>",nameElement.innerHTML=e}function isShowsFavourites(t){const e=favouriteList.find(e=>e.id===t.id);return console.log(e),void 0!==e}function listenShowsEvents(t){const e=document.querySelectorAll(".show");for(const t of e)t.addEventListener("click",handleShows)}function handleShows(t){const e=parseInt(t.currentTarget.dataset.myid),o=showsList.find((function(t){return t.id===e})),s=favouriteList.findIndex((function(t){return t.id===e}));-1===s?favouriteList.push(o):favouriteList.splice(s,1),setInLocalStorage(),paintFavoritesShow()}buttonElement.addEventListener("click",getFromApi);const favoriteElements=document.querySelector(".js-favourite--shows");function paintFavoritesShow(){let t="";t+='<button class="js-reset">Reset <i class="fa fa-trash" aria-hidden="true"></i></button>',t+="<ul>";for(const e of favouriteList)console.log(favouriteList),t+=`<li class="favouriteShow" data-myid=${e.id} >`,t+=`<h2>Name:${e.name}</h2>`,null===e.img?t+=`<img src="${imagenDefault}">`:(t+=`<img class="backstyle"src="${e.img.medium}">`,t+="</li>");t+="</ul>",favoriteElements.innerHTML=t;document.querySelector(".js-reset").addEventListener("click",resetFavButton)}function setInLocalStorage(){const t=JSON.stringify(favouriteList);localStorage.setItem("favourites",t)}function getFromLocalStorage(){const t=localStorage.getItem("favourites");if(null===t)getFromApi();else{const e=JSON.parse(t);favouriteList=e}paintFavoritesShow()}function resetFavButton(){favouriteList=[],paintFavoritesShow()}getFromLocalStorage();